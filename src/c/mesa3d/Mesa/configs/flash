# Configuration for building static libOSMesa.a on Linux, no Xlib driver
# This doesn't really have any Linux dependencies, so it should be usable
# on other (gcc-based) systems.


# 
# DO NOT EDIT THIS FILE UNTIL YOU'VE READ ALL PROJECT DOCUMENTATION
# - ed
# 

include $(TOP)/configs/default

CONFIG_NAME = flash

# For some reason gallium isn't including the std headers - I shouldn't have to do this
ALC_INCLUDES = -I/Users/edmcmanus/alchemy/alchemy/avm2-libc/include -I/Users/edmcmanus/alchemy/alchemy/bin/llvm-gcc4-darwin-install/lib/gcc/i686-apple-darwin8/4.0.1/include

# Alchemy Optimizations
# ALC_OPTIMIZATIONS = FORCESYNC=1

# Compiler and flags
CC = $(ALC_OPTIMIZATIONS) gcc -m32
CXX = $(ALC_OPTIMIZATIONS) g++ -m32
CFLAGS = -O2 -emit-llvm $(ALC_INCLUDES) -fno-strict-aliasing -fPIC -ffast-math -DOSX -DFLASH
CXXFLAGS = -O2 -emit-llvm $(ALC_INCLUDES) -fno-strict-aliasing -fPIC -ffast-math -DOSX -DFLASH
LDFLAGS = 

MKLIB_OPTIONS = -static

# Old - ed
# CFLAGS = -O2 -ansi -D_POSIX_SOURCE -D_POSIX_C_SOURCE=199309L -D_SVID_SOURCE -D_BSD_SOURCE -emit-llvm $(ALC_INCLUDES) -fno-strict-aliasing -fPIC -ffast-math -DOSX -DFLASH
# CXXFLAGS = -O2 -ansi -D_POSIX_SOURCE -D_POSIX_C_SOURCE=199309L -D_SVID_SOURCE -D_BSD_SOURCE -emit-llvm $(ALC_INCLUDES) -fno-strict-aliasing -fPIC -ffast-math -DOSX -DFLASH

# Library names (actual file names)
GL_LIB_NAME = libGL.a
GLU_LIB_NAME = libGLU.a
GLUT_LIB_NAME = libglut.a
GLW_LIB_NAME = libGLw.a
OSMESA_LIB_NAME = libOSMesa.a

# Directories
SRC_DIRS = gallium mesa glu
DRIVER_DIRS = osmesa
# PROGRAM_DIRS = flashosdemos
PROGRAM_DIRS = 

# IMPT - AVOID MKLIB - ed
MKLIB = ar rc 
MKLIB_OPTIONS =

# Dependencies
GL_LIB_DEPS =
OSMESA_LIB_DEPS =
GLU_LIB_DEPS =
GLUT_LIB_DEPS =
GLW_LIB_DEPS =
APP_LIB_DEPS = -L$(TOP)/$(LIB_DIR) -l$(GLUT_LIB) -l$(GLU_LIB) -l$(GL_LIB) \
               $(EXTRA_LIB_PATH) -lm
