After configuring, there are still more errors with the custom library builder. Just running `ar rc ...` after compiling all the *.c's is enough.

I edited src/c/mesa3d/Mesa/src/mesa/Makefile "helper libraries" section to reflect this change. I also updated Makefile.template with a similar change (updating the target "lib$(LIBNAME).a:")


Here's the command by hand:

ar rc libmesa.a main/api_arrayelt.o main/api_exec.o main/api_loopback.o main/api_noop.o main/api_validate.o main/accum.o main/attrib.o main/arrayobj.o main/blend.o main/bufferobj.o main/buffers.o main/clear.o main/clip.o main/colortab.o main/context.o main/convolve.o main/cpuinfo.o main/debug.o main/depth.o main/depthstencil.o main/dlist.o main/dlopen.o main/drawpix.o main/enable.o main/enums.o main/eval.o main/execmem.o main/extensions.o main/fbobject.o main/feedback.o main/ffvertex_prog.o main/fog.o main/formats.o main/framebuffer.o main/get.o main/getstring.o main/hash.o main/hint.o main/histogram.o main/image.o main/imports.o main/light.o main/lines.o main/matrix.o main/mipmap.o main/mm.o main/multisample.o main/pixel.o main/pixelstore.o main/points.o main/polygon.o main/queryobj.o main/rastpos.o main/rbadaptors.o main/readpix.o main/remap.o main/renderbuffer.o main/scissor.o main/shaders.o main/shared.o main/state.o main/stencil.o main/syncobj.o main/texcompress.o main/texcompress_s3tc.o main/texcompress_fxt1.o main/texenv.o main/texenvprogram.o main/texfetch.o main/texformat.o main/texgen.o main/texgetimage.o main/teximage.o main/texobj.o main/texparam.o main/texrender.o main/texstate.o main/texstore.o main/varray.o main/viewport.o main/vtxfmt.o math/m_debug_clip.o math/m_debug_norm.o math/m_debug_xform.o math/m_eval.o math/m_matrix.o math/m_translate.o math/m_vector.o math/m_xform.o vbo/vbo_context.o vbo/vbo_exec.o vbo/vbo_exec_api.o vbo/vbo_exec_array.o vbo/vbo_exec_draw.o vbo/vbo_exec_eval.o vbo/vbo_rebase.o vbo/vbo_split.o vbo/vbo_split_copy.o vbo/vbo_split_inplace.o vbo/vbo_save.o vbo/vbo_save_api.o vbo/vbo_save_draw.o vbo/vbo_save_loopback.o tnl/t_context.o tnl/t_pipeline.o tnl/t_draw.o tnl/t_rasterpos.o tnl/t_vb_program.o tnl/t_vb_render.o tnl/t_vb_texgen.o tnl/t_vb_texmat.o tnl/t_vb_vertex.o tnl/t_vb_cull.o tnl/t_vb_fog.o tnl/t_vb_light.o tnl/t_vb_normals.o tnl/t_vb_points.o tnl/t_vp_build.o tnl/t_vertex.o tnl/t_vertex_sse.o tnl/t_vertex_generic.o shader/arbprogparse.o shader/arbprogram.o shader/atifragshader.o shader/grammar/grammar_mesa.o shader/hash_table.o shader/lex.yy.o shader/nvfragparse.o shader/nvprogram.o shader/nvvertparse.o shader/program.o shader/program_parse.tab.o shader/program_parse_extra.o shader/prog_cache.o shader/prog_execute.o shader/prog_instruction.o shader/prog_noise.o shader/prog_optimize.o shader/prog_parameter.o shader/prog_parameter_layout.o shader/prog_print.o shader/prog_statevars.o shader/prog_uniform.o shader/programopt.o shader/symbol_table.o shader/shader_api.o swrast/s_aaline.o swrast/s_aatriangle.o swrast/s_accum.o swrast/s_alpha.o swrast/s_atifragshader.o swrast/s_bitmap.o swrast/s_blend.o swrast/s_blit.o swrast/s_clear.o swrast/s_copypix.o swrast/s_context.o swrast/s_depth.o swrast/s_drawpix.o swrast/s_feedback.o swrast/s_fog.o swrast/s_fragprog.o swrast/s_lines.o swrast/s_logic.o swrast/s_masking.o swrast/s_points.o swrast/s_readpix.o swrast/s_span.o swrast/s_stencil.o swrast/s_texcombine.o swrast/s_texfilter.o swrast/s_triangle.o swrast/s_zoom.o swrast_setup/ss_context.o swrast_setup/ss_triangle.o drivers/common/driverfuncs.o drivers/common/meta.o x86/common_x86.o x86/x86_xform.o x86/3dnow.o x86/sse.o x86/rtasm/x86sse.o sparc/sparc.o ppc/common_ppc.o x86-64/x86-64.o shader/slang/slang_builtin.o shader/slang/slang_codegen.o shader/slang/slang_compile.o shader/slang/slang_compile_function.o shader/slang/slang_compile_operation.o shader/slang/slang_compile_struct.o shader/slang/slang_compile_variable.o shader/slang/slang_emit.o shader/slang/slang_ir.o shader/slang/slang_label.o shader/slang/slang_link.o shader/slang/slang_log.o shader/slang/slang_mem.o shader/slang/slang_preprocess.o shader/slang/slang_print.o shader/slang/slang_simplify.o shader/slang/slang_storage.o shader/slang/slang_typeinfo.o shader/slang/slang_vartable.o shader/slang/slang_utility.o



So we just need to remove the mklib call from the makefile.